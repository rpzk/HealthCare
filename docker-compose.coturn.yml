version: '3.8'

services:
  coturn:
    image: coturn/coturn:latest
    container_name: healthcare-coturn
    restart: unless-stopped
    network_mode: host
    volumes:
      - ./coturn/turnserver.conf:/etc/coturn/turnserver.conf:ro
      - ./coturn/logs:/var/log/turnserver
    environment:
      - DETECT_EXTERNAL_IP=yes
      - DETECT_RELAY_IP=yes
    command: 
      - "-c"
      - "/etc/coturn/turnserver.conf"

# Uso:
# 1. Criar arquivo de configuração: mkdir -p coturn && vim coturn/turnserver.conf
# 2. Copiar configuração do docs/TELEMEDICINE_SETUP.md
# 3. Subir: docker-compose -f docker-compose.coturn.yml up -d
# 4. Logs: docker-compose -f docker-compose.coturn.yml logs -f
# 5. Parar: docker-compose -f docker-compose.coturn.yml down
